const supabaseUrl="https://ijhfidvohtkcmpdhgzwz.supabase.co",supabaseKey="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImlqaGZpZHZvaHRrY21wZGhnend6Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDUzMDY4NjUsImV4cCI6MjA2MDg4Mjg2NX0.4-DicPttGvOJ30UFwvOONrkybrvCxP5dgqn5oEXo-Dk";var BookingInfo={};async function signIn(email="anonymous@example.com",password="Guest1234"){if(localStorage.getItem("user")){if(!(JSON.parse(localStorage.getItem("user")).expires_at<=Date.now()))return JSON.parse(localStorage.getItem("user"));localStorage.removeItem("user")}const response=await fetch(`${supabaseUrl}/auth/v1/token?grant_type=password`,{method:"POST",headers:{"Content-Type":"application/json",apikey:supabaseKey},body:JSON.stringify({email:email,password:password})}),data=await response.json();if(response.ok){const saveDataForeLater={access_token:data.access_token,expires_at:data.expires_at+Date.now(),logged_in_via:data.user.email};return localStorage.setItem("user",JSON.stringify(saveDataForeLater)),saveDataForeLater}return console.error("Error signing in:",data),null}async function makeRequestBooking(){const{access_token:access_token}=await signIn(),response=await fetch(`${supabaseUrl}/rest/v1/requestBooking`,{method:"POST",headers:{"Content-Type":"application/json",apikey:supabaseKey,Authorization:`Bearer ${access_token}`,Prefer:"return=representation"},body:JSON.stringify([{email:"anonymous@example.com",fulde_navn:"test",tlf:12345678,adress:"testvej 1",start_time:"2023-01-01 12:00:00",duration:150,location_for_work:"testvej 2",message:"testtesttest"}])}),data=await response.json();response.ok?console.log("Row inserted:",data):console.error("Insert failed:",data)}function isFormFilled(){const requiredFields=document.querySelectorAll("[required]");if(BookingInfo={},requiredFields.forEach((field=>{""==field.value?field.classList.add("not-filled"):field.classList.contains("not-filled")&&field.classList.remove("not-filled")})),document.querySelector(".not-filled"))return!1;const fulde_navn=document.getElementById("fullname").value,email=document.getElementById("email").value,tlf=document.getElementById("tlf").value,start_time=document.getElementById("start_time").value,duration=document.getElementById("duration").value,message=document.getElementById("message").value||"",adress=document.getElementById("autocomplete-adresse").value,houseNumber=document.getElementById("autocomplete-house-number").value,postalcode=document.getElementById("autocomplete-postal-code").value,by=document.getElementById("autocomplete-by").value;document.getElementById("location_for_work").value;return BookingInfo={email:email,fulde_navn:fulde_navn,tlf:tlf,adress:`${adress} ${houseNumber}`,start_time:start_time,duration:duration,adress:`${adress} ${houseNumber}, ${postalcode} ${by}`,location_for_work:"",message:message},!0}