function getWeekNumber(date=new Date){date.setHours(0,0,0,0),date.setDate(date.getDate()+3-(date.getDay()+6)%7);const week1=new Date(date.getFullYear(),0,4);return Math.round((date.getTime()-week1.getTime())/864e5-3+(week1.getDay()+6)%7)/7+1}function getWeekDates(date=new Date){date.setHours(0,0,0,0);const isoDay=(date.getDay()+6)%7;date.setDate(date.getDate()-isoDay);const weekDates=[];for(let i=0;i<7;i++){const d=new Date(date);d.setDate(date.getDate()+i),weekDates.push(d.getDate()+". "+d.toLocaleString("default",{month:"short"}))}return weekDates}function renderWeek(date,setDatePicker=!0){const datePicker=document.getElementById("datepicker");if(setDatePicker){const oneDayAhead=new Date(date);oneDayAhead.setDate(oneDayAhead.getDate()+1),oneDayAhead.setHours(13,0,0,0);flatpickr(datePicker,{locale:"da",enableTime:!0,dateFormat:"d-m-Y H:i",time_24hr:!0,minDate:"today",minTime:"08:00",maxTime:"17:00",weekNumbers:!0}).setDate(oneDayAhead)}document.getElementById("week").textContent="Uge "+getWeekNumber(date),getWeekDates(date).forEach(((day,index)=>{document.getElementById("date"+index).textContent=day}))}function addService(service){const selectedServices=document.getElementById("selected_services_list"),newService=document.createElement("div");selectedServices.appendChild(newService);const value=service.split(" - ");span1=document.createElement("span"),span1.textContent=value[0],newService.appendChild(span1),span2=document.createElement("span"),span2.textContent=value[1],newService.appendChild(span2)}function stringToDateObject(dateStr){const[datePart,timePart]=dateStr.split(" "),[day,month,year]=datePart.split("-"),[hour,minute]=timePart.split(":");return new Date(year,month-1,day,hour,minute)}document.addEventListener("DOMContentLoaded",(()=>{let currentDate=new Date;const datePicker=document.getElementById("datepicker"),servicePicker=document.getElementById("add_services");renderWeek(currentDate),document.getElementById("next_week").addEventListener("click",(()=>{currentDate.setDate(currentDate.getDate()+7),renderWeek(currentDate)})),document.getElementById("prev_week").addEventListener("click",(()=>{currentDate.setDate(currentDate.getDate()-7),renderWeek(currentDate)})),datePicker.addEventListener("change",(()=>{const selectedDate=new Date(stringToDateObject(datePicker.value));currentDate=selectedDate,renderWeek(currentDate,!1)})),servicePicker.addEventListener("change",(()=>{addService(servicePicker.value),servicePicker.value="default"}))}));