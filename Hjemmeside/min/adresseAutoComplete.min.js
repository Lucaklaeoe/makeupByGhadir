const input=document.getElementById("autocomplete-adresse"),suggestionsList=document.getElementById("autocomplete-suggestions"),autocompletePostalCode=document.getElementById("autocomplete-postal-code"),autocompleteBy=document.getElementById("autocomplete-by"),apiKey="4185f197618f4737856f9e0180d5dcc0";input.addEventListener("input",(async()=>{const query=input.value;if(query.length<5)return;const url=`https://api.geoapify.com/v1/geocode/autocomplete?text=${query}&lang=en&limit=5&type=street&filter=countrycode:auto&format=json&apiKey=${apiKey}`,res=await fetch(url),data=await res.json();console.log(data),suggestionsList.innerHTML="",data.results.forEach((place=>{const li=document.createElement("li");li.textContent=place.formatted,li.addEventListener("click",(()=>{input.value=place.address_line1,suggestionsList.innerHTML="",autocompletePostalCode.value=place.postcode,autocompleteBy.value=place.country})),suggestionsList.appendChild(li)})),window.addEventListener("click",(()=>{suggestionsList.innerHTML=""})),document.querySelectorAll(".check_if_autocompleted").forEach(((input,index)=>{input.addEventListener("blur",(()=>{input.value.includes(" ")&&(document.querySelectorAll(".houseNumber")[index].value=input.value.split(" ")[1],input.value=input.value.split(" ")[0])}))}))}));