const input=document.getElementById("autocomplete-adresse"),suggestionsList=document.getElementById("autocomplete-suggestions"),autocompletePostalCode=document.getElementById("autocomplete-postal-code"),autocompleteBy=document.getElementById("autocomplete-by"),apiKey="4185f197618f4737856f9e0180d5dcc0";input.addEventListener("input",(async()=>{const query=input.value;if(query.length<5)return;const url=`https://api.geoapify.com/v1/geocode/autocomplete?text=${encodeURIComponent(query)}&lang=da&filter=countrycode:dk&limit=5&types=house&apiKey=${apiKey}`,res=await fetch(url),data=await res.json();console.log(data),suggestionsList.innerHTML="",data.features.forEach((place=>{const li=document.createElement("li");li.textContent=place.properties.formatted,li.addEventListener("click",(()=>{input.value=place.properties.formatted,suggestionsList.innerHTML="",autocompletePostalCode.value=place.properties.postcode,autocompleteBy.value=place.properties.country})),suggestionsList.appendChild(li)})),window.addEventListener("click",(()=>{suggestionsList.innerHTML=""}))}));